<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport content=width=device-width, initial-scale=1">
    <title>Nighthaunt Helper</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aclonica&family=Denk+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/nhstyle-test.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>
    <nav>Nav to nowhere</nav>
    <article>

        <section class="bg-img bg-img1">
            <div class="content">
                <h1>Fixed backgrounds on a mobile browser</h1>
            </div>
        </section>

        <section class="solid">
            <h3>Scrolling Foreground Here</h3>
        </section>

        <section>
            <div class="content">
                <p>Quid securi etiam tamquam eu fugiat nulla pariatur. Cum ceteris in veneratione tui montes, nascetur
                    mus. Quisque placerat facilisis egestas cillum dolore. Ambitioni dedisse scripsisse iudicaretur.
                    Quisque ut dolor gravida, placerat libero vel,
                    euismod.
                </p>
            </div>
        </section>

        <section class="solid">
            <h3>Scrolling Foreground Here</h3>
        </section>

        <section class="footer">
            <div class="content">
                <h3>The end is nigh.</h3>
            </div>
        </section>
    </article>
    <script>
        window.onload = function () {

            // Alternate Background Page with scrolling content (Bg Pages are odd#s)
            var $bgImg = $('.bg-img');
            var $nav = $('nav');
            var winh = window.innerHeight;
            var scrollPos = 0;
            var page = 1;
            var page1Bottom = winh;
            var page3Top = winh;
            var page3Bottom = winh * 3;
            var page5Top = winh * 3;
            var page5Bottom = winh * 5;

            $(window).on('scroll', function () {

                scrollPos = Number($(window).scrollTop().toFixed(2));
                page = Math.floor(Number(scrollPos / winh) + 1);
                if (scrollPos >= 0 && scrollPos < page1Bottom) {
                    if (!$bgImg.hasClass('bg-img1')) {

                        removeBg($bgImg, 2, 3, 1); // element, low, high, current
                        $bgImg.addClass('bg-img1');
                    }
                } else if (scrollPos >= page3Top && scrollPos <= page3Bottom) {
                    if (!$bgImg.hasClass('bg-img2')) {

                        removeBg($bgImg, 1, 3, 2); // element, low, high, current
                        $bgImg.addClass('bg-img2');
                    }
                } else if (scrollPos >= page5Top && scrollPos <= page5Bottom) {
                    if (!$bgImg.hasClass('bg-img3')) {

                        removeBg($bgImg, 1, 2, 3); // element, low, high, current
                        $bgImg.addClass('bg-img3');
                    }
                }
                $nav.html("Page# " + page + " window position: " + scrollPos);

            });
        }

        // This function was created to fix a problem where the mouse moves off the
        // screen, this results in improper removal of background image class. Fix
        // by removing any background class not applicable to current page.
        function removeBg(el, low, high, current) {
            if (low > high || low <= 0 || high <= 0) {
                console.log("bad low/high parameters in removeBg");
            }
            for (var i = low; i <= high; i++) {
                if (i != current) { // avoid removing class we are trying to add
                    if (el.hasClass('bg-img' + i)) {
                        el.removeClass('bg-img' + i);
                    }
                }
            }
        } // removeBg()</script>
</body>

</html>